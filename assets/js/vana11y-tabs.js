(()=>{var x=Object.defineProperty;var u=Object.getOwnPropertySymbols;var p=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var d=(i,t,s)=>t in i?x(i,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[t]=s,l=(i,t)=>{for(var s in t||(t={}))p.call(t,s)&&d(i,s,t[s]);if(u)for(var s of u(t))A.call(t,s)&&d(i,s,t[s]);return i};var k={tabs:{class:".js-tabs",suffix:"-tabs",role:""},list:{class:".js-tablist",suffix:"-tabs__list",role:"tablist"},item:{class:".js-tablist-item",suffix:"-tabs__item",role:"presentation"},link:{class:".js-tablist-link",suffix:"-tabs__link",role:"tab"},panel:{class:".js-tab-panel",suffix:"-tabs__content",role:"tabpanel"}},b={nodes:["TEXTAREA","SELECT","OPTION","INPUT"],types:["checkbox","radio","button","submit","image","file"]},h=class{handleEvent(t){this[`on${t.type}`](t)}addEvents(){this.list.addEventListener("click",this),this.list.addEventListener("keydown",this)}canClick(t){let{nodeName:s,type:e}=t.target;return!(b.nodes.includes(s)||b.types.includes(e))}onclick(t){let s=t.target.closest(this.options.link.class),e=s&&this.links.indexOf(s);this.canClick(t)&&s&&e>-1&&(t.preventDefault(),this.select(e))}onkeydown(t){let s=this.orientation==="vertical",{keyCode:e,ctrlKey:a}=t,n=s?38:37,f=s?40:39,r;switch(e){case 35:r=-1;break;case 36:r=0;break;case n:r=this.index-1;break;case f:r=this.index+1;break}r!==void 0&&(t.preventDefault(),this.select(r))}},o=class extends h{query(){let{tabs:t,list:s,item:e,link:a,panel:n}=this.options;this.list=this.element.querySelector(s.class),this.items=this.list&&[...this.list.querySelectorAll(e.class)],this.links=this.list&&[...this.list.querySelectorAll(a.class)],this.panels=this.element.querySelectorAll(n.class)}setTabs(){this.setAtts(this.list,"list"),this.setAtts(this.element,"tabs"),this.list.setAttribute("aria-orientation",this.orientation||"horizontal"),this.items.forEach(t=>this.setAtts(t,"item")),this.links.forEach((t,s)=>this.setLink(t,s)),this.panels.forEach((t,s)=>this.setPanel(t,s))}setLink(t,s){let e=t.getAttribute("href").replace("#",""),a=t.hasAttribute("data-selected");t.setAttribute("aria-selected","false"),t.setAttribute("aria-controls",e),t.setAttribute("tabindex","-1"),t.setAttribute("id",`label_${e}`),this.setIndex(t,s,e),this.setAtts(t,"link")}setIndex(t,s,e){let a=t.hasAttribute("data-selected");this.index===void 0&&a&&(this.index=s),e===this.urlHash&&(this.index=s)}setPanel(t,s){t.setAttribute("aria-labelledby",`label_${t.id}`),t.setAttribute("hidden",""),this.setHeader(t,s),this.setAtts(t,"panel")}setHeader(t,s){let e=this.hxExists&&t.querySelector(this.hxExists);this.hxLevel&&!e&&(e=document.createElement(this.hxLevel),e.setAttribute("tabindex",0),e.textContent=this.links[s].textContent,e.className=this.hxClass||"invisible",t.insertBefore(e,t.firstChild)),e&&e.setAttribute("tabindex",0)}updateLink(t,s){t.setAttribute("aria-selected",s?"true":"false"),t.setAttribute("tabindex",s?"0":"-1")}updatePanel(t,s){t[`${s?"remove":"set"}Attribute`]("hidden","")}setAtts(t,s){let{role:e,suffix:a}=this.options[s];e&&t.setAttribute("role",e),t.className+=` ${this.prefix+a}`}},c=class extends o{constructor(t,s={}){super(),this.element=t,this.options=l(l({},k),s),this.urlHash=window.location.hash.replace("#",""),this.prefix=t.getAttribute("data-tabs-prefix-class"),this.hxLevel=t.getAttribute("data-hx"),this.hxClass=t.getAttribute("data-tabs-generated-hx-class"),this.hxExists=t.getAttribute("data-existing-hx"),this.orientation=t.getAttribute("data-orientation")}init(){this.query(),this.check()&&(this.setTabs(),this.hasAnchor(),this.addEvents(),this.toggle(this.index,!0))}check(){return this.list?this.items.length!==this.panels.length?!!console.error("The number of tabs do not correspond to the number of panels."):!0:!!console.error("The HTML markup of the tablist is not valid.")}hasAnchor(){let{panel:t}=this.options,s=this.urlHash&&this.element.querySelector(`${t.class} #${this.urlHash}`);if(s){var e=s.closest(t.class),a=Array.prototype.slice.call(this.panels),n=a.indexOf(e);n>0&&(this.index=n,requestAnimationFrame(()=>s.focus()))}}select(t){t=this.modulo(this.items.length,t||0),this.index!==t&&(this.toggle(this.index,!1),this.toggle(t,!0),this.focus(t),this.state(t),this.index=t)}toggle(t=0,s){this.updatePanel(this.panels[t],s),this.updateLink(this.links[t],s)}focus(t){this.links[t].focus()}state(t){let{pathname:s,search:e}=window.location,a=this.links[t].getAttribute("aria-controls");a&&history.pushState&&history.pushState(null,null,`${s+e}#${a}`)}modulo(t,s){return(t+s%t)%t}};document.addEventListener("DOMContentLoaded",()=>{let i=document.querySelectorAll(".js-tabs");i&&i.forEach(t=>new c(t).init())});})();
//# sourceMappingURL=vana11y-tabs.src.js.map
