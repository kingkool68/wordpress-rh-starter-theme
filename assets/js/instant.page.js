(()=>{var s,c,f=new Set,d=document.createElement("link"),g=d.relList&&d.relList.supports&&d.relList.supports("prefetch")&&window.IntersectionObserver&&"isIntersecting"in IntersectionObserverEntry.prototype,b="instantAllowQueryString"in document.body.dataset,y="instantAllowExternalLinks"in document.body.dataset,E="instantWhitelist"in document.body.dataset,m="instantMousedownShortcut"in document.body.dataset,p=1111,h=65,v=!1,w=!1,l=!1;if("instantIntensity"in document.body.dataset){let e=document.body.dataset.instantIntensity;if(e.substr(0,9)=="mousedown")v=!0,e=="mousedown-only"&&(w=!0);else if(e.substr(0,8)=="viewport")navigator.connection&&(navigator.connection.saveData||navigator.connection.effectiveType&&navigator.connection.effectiveType.includes("2g"))||(e=="viewport"?document.documentElement.clientWidth*document.documentElement.clientHeight<45e4&&(l=!0):e=="viewport-all"&&(l=!0));else{let n=parseInt(e);isNaN(n)||(h=n)}}if(g){let e={capture:!0,passive:!0};if(w||document.addEventListener("touchstart",function(n){c=performance.now();let t=n.target.closest("a");a(t)&&r(t.href)},e),v?m||document.addEventListener("mousedown",function(n){let t=n.target.closest("a");a(t)&&r(t.href)},e):document.addEventListener("mouseover",function(n){if(performance.now()-c<p)return;let t=n.target.closest("a");a(t)&&(t.addEventListener("mouseout",I,{passive:!0}),s=setTimeout(()=>{r(t.href),s=void 0},h))},e),m&&document.addEventListener("mousedown",function(n){if(performance.now()-c<p)return;let t=n.target.closest("a");if(n.which>1||n.metaKey||n.ctrlKey||!t)return;t.addEventListener("click",function(i){i.detail!=1337&&i.preventDefault()},{capture:!0,passive:!1,once:!0});let o=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1,detail:1337});t.dispatchEvent(o)},e),l){let n;(n=window.requestIdleCallback?t=>{requestIdleCallback(t,{timeout:1500})}:t=>{t()})(()=>{let t=new IntersectionObserver(o=>{o.forEach(i=>{if(i.isIntersecting){let u=i.target;t.unobserve(u),r(u.href)}})});document.querySelectorAll("a").forEach(o=>{a(o)&&t.observe(o)})})}}function I(e){e.relatedTarget&&e.target.closest("a")==e.relatedTarget.closest("a")||s&&(clearTimeout(s),s=void 0)}function a(e){if(e&&e.href&&(!E||"instant"in e.dataset)&&(y||e.origin==location.origin||"instant"in e.dataset)&&["http:","https:"].includes(e.protocol)&&(e.protocol!="http:"||location.protocol!="https:")&&(b||!e.search||"instant"in e.dataset)&&!(e.hash&&e.pathname+e.search==location.pathname+location.search||"noInstant"in e.dataset))return!0}function r(e){if(f.has(e))return;let n=document.createElement("link");n.rel="prefetch",n.href=e,document.head.appendChild(n),f.add(e)}})();
/*! instant.page v5.1.0 - (C) 2019-2020 Alexandre Dieulot - https://instant.page/license */
//# sourceMappingURL=instant.page.js.map
