{
  "version": 3,
  "sources": ["vana11y-tabs.src.js"],
  "sourcesContent": ["/*\n * Refactor of vana11y accessible tab panel script\n *\n * ES2015 accessible tabs panel system, using ARIA\n * Website: https://github.com/nico3333fr/van11y-accessible-tab-panel-aria/issues/13\n * License MIT: https://github.com/nico3333fr/van11y-accessible-tab-panel-aria/blob/master/LICENSE\n */\n\nconst defaults = {\n    tabs: {\n        class: '.js-tabs',\n        suffix: '-tabs',\n        role: '',\n    },\n    list: {\n        class: '.js-tablist',\n        suffix: '-tabs__list',\n        role: 'tablist',\n    },\n    item: {\n        class: '.js-tablist-item',\n        suffix: '-tabs__item',\n        role: 'presentation',\n    },\n    link: {\n        class: '.js-tablist-link',\n        suffix: '-tabs__link',\n        role: 'tab',\n    },\n    panel: {\n        class: '.js-tab-panel',\n        suffix: '-tabs__content',\n        role: 'tabpanel',\n    },\n};\n\nconst interactive = {\n    nodes: ['TEXTAREA', 'SELECT', 'OPTION', 'INPUT'],\n    types: ['checkbox', 'radio', 'button', 'submit', 'image', 'file'],\n};\n\nclass Events {\n\n    /**\n     * Trigger handler methods for events\n   *\n     * @param {Object} event\n     */\n    handleEvent(event) {\n\n        this[`on${event.type}`](event);\n\n    }\n\n    /**\n     * Handle select events\n     *\n     * @param {Boolean} bind\n     */\n    addEvents() {\n\n        this.list.addEventListener('click', this)\n        this.list.addEventListener('keydown', this);\n\n    }\n\n    /**\n     * Check if we can handle click on non interactive element\n   *\n     * @param {Object} event\n   * @return {Boolean}\n     */\n    canClick(event) {\n\n        const { nodeName, type } = event.target;\n\n        if (\n            interactive.nodes.includes(nodeName) ||\n            interactive.types.includes(type)\n        ) {\n            return false;\n        }\n\n        return true;\n\n    }\n\n    /**\n     * Handle click event to select tab\n   *\n     * @param {Object} event\n     */\n    onclick(event) {\n\n        const link = event.target.closest(this.options.link.class);\n        const index = link && this.links.indexOf(link);\n\n        if (!this.canClick(event)) {\n            return;\n        }\n\n        if (link && index > -1) {\n\n            event.preventDefault();\n            this.select(index);\n\n        }\n\n    }\n\n    /**\n     * Handle keydown event to select tab\n   *\n     * @param {Object} event\n     */\n    onkeydown(event) {\n\n        const isVertical = this.orientation === 'vertical';\n        const { keyCode, ctrlKey } = event;\n        const prev = isVertical ? 38 : 37;\n        const next = isVertical ? 40 : 39;\n        let index;\n\n        switch (keyCode) {\n            // End.\n            case 35:\n                index = -1;\n                break;\n            // Home.\n            case 36:\n                index = 0;\n                break;\n            // Left (horizontal) or Up (vertical).\n            case prev:\n                index = this.index - 1;\n                break;\n            // Right (horizontal) or Down (vertical).\n            case next:\n                index = this.index + 1;\n                break;\n        }\n\n        if (index !== undefined) {\n\n            event.preventDefault();\n            this.select(index);\n\n        }\n    }\n}\n\nclass Markup extends Events {\n\n    /**\n     * Query tabs nodes\n     */\n    query() {\n\n        const { tabs, list, item, link, panel } = this.options;\n\n        this.list = this.element.querySelector(list.class);\n        this.items = this.list && [...this.list.querySelectorAll(item.class)];\n        this.links = this.list && [...this.list.querySelectorAll(link.class)];\n        this.panels = this.element.querySelectorAll(panel.class);\n    }\n\n    /**\n     * Set tabs attributes\n     */\n    setTabs() {\n\n        this.setAtts(this.list, 'list');\n        this.setAtts(this.element, 'tabs');\n        this.list.setAttribute('aria-orientation', this.orientation || 'horizontal');\n        this.items.forEach(el => this.setAtts(el, 'item'));\n        this.links.forEach((el, i) => this.setLink(el, i));\n        this.panels.forEach((el, i) => this.setPanel(el, i));\n\n    }\n\n    /**\n     * Set link attributes\n     */\n    setLink(el, i) {\n\n        const ref = el.getAttribute('href').replace('#', '');\n        const selected = el.hasAttribute('data-selected');\n\n        el.setAttribute('aria-selected', 'false');\n        el.setAttribute('aria-controls', ref);\n        el.setAttribute('tabindex', '-1');\n        el.setAttribute('id', `label_${ref}`);\n\n        this.setIndex(el, i, ref);\n        this.setAtts(el, 'link');\n\n    }\n\n    /**\n     * Set index from link\n     */\n    setIndex(el, i, ref) {\n\n        const selected = el.hasAttribute('data-selected');\n\n        if (this.index === undefined && selected) {\n            this.index = i;\n        }\n\n        if (ref === this.urlHash) {\n            this.index = i;\n        }\n\n    }\n\n    /**\n     * Set panel attributes\n     */\n    setPanel(el, i) {\n\n        el.setAttribute('aria-labelledby', `label_${el.id}`);\n        el.setAttribute('hidden', '');\n        this.setHeader(el, i);\n        this.setAtts(el, 'panel');\n\n    }\n\n    /**\n     * Set panel header\n     */\n    setHeader(el, i) {\n\n        let header = this.hxExists && el.querySelector(this.hxExists);\n\n        if (this.hxLevel && !header) {\n\n            header = document.createElement(this.hxLevel);\n            header.setAttribute('tabindex', 0);\n            header.textContent = this.links[i].textContent;\n            header.className = this.hxClass || 'invisible';\n\n            el.insertBefore(header, el.firstChild);\n\n        }\n\n        header && header.setAttribute('tabindex', 0);\n\n    }\n\n    /**\n     * update link attributes\n     */\n    updateLink(el, selected) {\n\n        el.setAttribute('aria-selected', selected ? 'true' : 'false');\n        el.setAttribute('tabindex', selected ? '0' : '-1');\n\n    }\n\n    /**\n     * update panel attributes\n     */\n    updatePanel(el, selected) {\n\n        el[`${selected ? 'remove' : 'set'}Attribute`]('hidden', '');\n\n    }\n\n    /**\n     * set HTML attributes\n     */\n    setAtts(el, type) {\n\n        const { role, suffix } = this.options[type];\n\n        role && el.setAttribute('role', role);\n        el.className += ` ${this.prefix + suffix}`;\n\n    }\n}\n\nclass Tabs extends Markup {\n\n    /**\n     * Constructor\n     *\n     * @param {Object} element\n     * @param {Object} options\n     */\n    constructor(element, options = {}) {\n\n        super();\n\n        this.element = element;\n        this.options = { ...defaults, ...options };\n        this.urlHash = window.location.hash.replace('#', '');\n\n        // !! HTML initialization !!\n        // Should be changed by one [data-a11ytabs-options] attr with JSON string (e.g.: {hxClass: 'name', hxLevel: 'h2',...} ).\n        // It will be easier to maintain and to override JS default options.\n        this.prefix = element.getAttribute('data-tabs-prefix-class');\n        this.hxLevel = element.getAttribute('data-hx');\n        this.hxClass = element.getAttribute('data-tabs-generated-hx-class');\n        this.hxExists = element.getAttribute('data-existing-hx');\n        this.orientation = element.getAttribute('data-orientation');\n\n    }\n\n    /**\n     * Initialize instance\n     */\n    init() {\n\n        this.query();\n\n        if (!this.check()) {\n            return;\n        }\n\n        this.setTabs();\n        this.hasAnchor();\n        this.addEvents();\n        this.toggle(this.index, true);\n\n    }\n\n    /**\n     * Make sure we can safely initialize\n     *\n     * @return {Boolean}\n     */\n    check() {\n\n        if (!this.list) {\n            return !!console.error('The HTML markup of the tablist is not valid.');\n        }\n\n        if (this.items.length !== this.panels.length) {\n            return !!console.error('The number of tabs do not correspond to the number of panels.');\n        }\n\n        return true;\n\n    }\n\n    /**\n       * Check if hash anchor present in panel content\n       */\n    hasAnchor() {\n\n        const { panel } = this.options;\n        const anchor = this.urlHash && this.element.querySelector(`${panel.class} #${this.urlHash}`);\n        if (anchor) {\n            var closestPanel = anchor.closest(panel.class);\n            // this.panels is an array-like NodeList object, convert to array and perform indexOf\n            var arrPanels = Array.prototype.slice.call(this.panels);\n            var index = arrPanels.indexOf(closestPanel);\n\n            if (index > 0) {\n                this.index = index;\n                // We wait tabs to be repainted to focus on anchor.\n                requestAnimationFrame(() => anchor.focus());\n            }\n        }\n    }\n\n    /**\n     * Select tab item and reveal tab panel\n     *\n     * @param {Integer} index Zero-based index\n     */\n    select(index) {\n\n        index = this.modulo(this.items.length, index || 0);\n\n        if (this.index === index) {\n            return;\n        }\n\n        this.toggle(this.index, false);\n        this.toggle(index, true);\n        this.focus(index);\n        this.state(index);\n\n        this.index = index;\n\n    }\n\n    /**\n     * Toggle tab link and panel attributes\n     *\n     * @param {Integer} index    Zero-based index\n     * @param {Boolean} selected State of tab and panel\n     */\n    toggle(index = 0, selected) {\n\n        this.updatePanel(this.panels[index], selected);\n        this.updateLink(this.links[index], selected);\n\n    }\n\n    /**\n     * Focus link on select\n     *\n     * @param {Integer} index Zero-based index\n     */\n    focus(index) {\n\n        this.links[index].focus();\n\n    }\n\n    /**\n     * Update url hash on tab selection\n     *\n     * @param {Integer} index Zero-based index\n     */\n    state(index) {\n\n        const { pathname, search } = window.location;\n        const controls = this.links[index].getAttribute('aria-controls');\n\n        controls && history.pushState && history.pushState(null, null, `${pathname + search}#${controls}`)\n\n    }\n\n    /**\n     * Modulo calculation\n     *\n     * @param {Integer} length\n     * @param {Integer} index\n     */\n    modulo(length, index) {\n\n        return (length + (index % length)) % length;\n\n    }\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n    const tabs = document.querySelectorAll('.js-tabs');\n    tabs && tabs.forEach(el => new Tabs(el).init())\n});\n"],
  "mappings": "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",
  "names": ["defaults", "interactive", "Events", "event", "nodeName", "type", "link", "index", "isVertical", "keyCode", "ctrlKey", "prev", "next", "Markup", "tabs", "list", "item", "panel", "el", "i", "ref", "selected", "header", "role", "suffix", "Tabs", "element", "options", "__spreadValues", "anchor", "closestPanel", "arrPanels", "pathname", "search", "controls", "length"]
}
